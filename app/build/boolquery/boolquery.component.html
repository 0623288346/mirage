<div class="form-group single_query col-xs-12 bool_query">
	<div class="action-btn-group">
		<a href="javascript:void(0)" (click)="addSubQuery(query.id)" class="btn btn-info">
			<i class="fa fa-plus"></i> Nested query
		</a>
		<a href="javascript:void(0)" (click)="removeInQuery(query.id)" class="btn btn-danger">
			<i class="fa fa-trash"></i>
		</a>
	</div>
	<select class="form-control form-element m-tb-15" [(ngModel)]="query.boolparam" (change)="exeBuild();">
		<option *ngFor="let oo of queryList.boolQuery, let i=index" [value]="i">{{oo.name}}</option>
	</select>
	<div class="internvalQuery">
		<form class="row m-0"
		 *ngFor="let queryIn of query.internal, let internalIndex=index"
		 >
			<single-query 
				[mapping]="mapping"
				[config]="config" 
				[query]="queryIn" 
				[queryList]="queryList"
				[internalIndex]="internalIndex"
				[queryIndex]="query.id"
				[internal]="query.internal"
				[buildQuery]="buildQuery"
				[buildInsideQuery]="buildInsideQuery"
				[buildSubQuery]="buildSubQuery"
				[createQuery]="createQuery"
				[setQueryFormat]="setQueryFormat"
				[editorHookHelp]="editorHookHelp">
			</single-query>
		</form>
		<div class="col-xs-12 pd-0">
			<button class="btn btn-info pull-left" (click)="addQuery(query);">Add internal query</button>
		</div>
	</div>
	<div class="subQuery">
		<form class="row m-0" *ngFor="let queryIn of mapping.resultQuery.result">
			<div *ngIf="queryIn.parent_id != 0 && queryIn.parent_id == query.id">
				<bool-query 
					[mapping]="mapping"
					[config]="config" 
					[query]="queryIn" 
					[queryList]="queryList"
					[addQuery]="addQuery"
					[addBoolQuery]="addBoolQuery"
					[removeQuery]="removeQuery"
					[queryFormat]="queryFormat"
					[buildQuery]="buildQuery"
					[buildInsideQuery]="buildInsideQuery"
					[buildSubQuery]="buildSubQuery"
					[createQuery]="createQuery"
					[setQueryFormat]="setQueryFormat"
					[editorHookHelp]="editorHookHelp">
				</bool-query>
			</div>
		</form>
	</div>
</div>