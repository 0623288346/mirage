<div class="row queryLeft">
	<div class="col-xs-12 pd-0">
		<div class="form-group m-b15">
			<types  [detectChange]="detectChange" [mapping] = "mapping" [config] = "config" [finalUrl]="finalUrl"  (setFinalUrl)="setFinalUrlIn($event)" [urlShare]="urlShare">
			</types>
		</div>
		<div class="form-group m-b15">
			<input type="text" class="form-control" placeholder="final url" [(ngModel)]="finalUrl" (keyup)="setFinalUrlIn(finalUrl)" />
		</div>
		<form class="row m-0"
		 *ngFor="let queryIn of mapping.resultQuery.result"
		 >
		 	<div *ngIf="queryIn.parent_id == 0">
				<bool-query 
					[mapping]="mapping"
					[config]="config" 
					[query]="queryIn" 
					[queryList]="queryList"
					[addQuery]="addQuery"
					[addBoolQuery]="addBoolQuery"
					[removeQuery]="removeQuery"
					[queryFormat]="queryFormat"
					[buildQuery]="buildQuery"
					[buildInsideQuery]="buildInsideQuery"
					[buildSubQuery]="buildSubQuery"
					[createQuery]="createQuery"
					[setQueryFormat]="setQueryFormat"
					[editorHookHelp]="editorHookHelp">
				</bool-query>
			</div>	
		</form>
		<div class="col-xs-12 pd-0">
			<button class="btn btn-info pull-left" (click)="addBoolQuery(0);">Add new query</button>
			<span class=" pull-right">
				<button class="btn btn-primary" (click)="openModal();">Save Query</button>
			</span>
		</div>
	</div>
</div>

<div class="modal fade" id="saveQueryModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<form (ngSubmit)="save()" #heroForm="ngForm">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">Save Query</h4>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label for="name">Name</label>
						<input type="text" class="form-control" required [(ngModel)]="query_info.name" ngControl="name" #name="ngForm" />
						<div [hidden]="name.valid || name.pristine" class="alert alert-danger">Name is required</div>
					</div>
					<div class="form-group">
						<label for="tag">Tag</label>
						<input type="text" class="form-control" [(ngModel)]="query_info.tag" ngControl="tag" #tag="ngForm" />
					</div>
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-default btn-primary" [disabled]="!heroForm.form.valid">Submit</button>
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</form>
		</div>
	</div>
</div>